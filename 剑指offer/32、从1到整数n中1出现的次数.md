##### [原文](https://blog.csdn.net/Koala_Tree/java/article/details/79524603)

##### [参考](https://blog.csdn.net/yi_Afly/article/details/52012593)

# 从1到整数n中1出现的次数


## 解决思路

- 常规思路（暴力解决），一个数一个数的计数

累加 1 到 n 中每个整数 1 出现的次数。我们可以每次通过对 10 求余数判断整数的个位数字是不是 1。
如果这个数字大于 10，除以 10 之后再判断个位数字是不是 1 。

> 直接遍历这些整数，转化为字符串，统计每个中1出现的次数。没有考虑时间效率。

- 寻找数学规律

这里的 X∈[1,9]，因为 X=0 不符合下列规律，需要单独计算。

首先要知道以下的规律：
```
这种解法寻求数字的规律，时间复杂度低；
首先要知道以下的规律：


以21354为例，寻找1出现的次数：

个位：从1至21350中包含了2135个10，因此1出现了2135次，21351，21352，21353，21354其中21351包含了一个1，故个位出现1的次数为：2135*10(1-1) + 1 = 2136次；

公式：( 2135+1）* 10^(1-1) = 2136；

十位：从1到21300中包含了213个100，因此1出现了213 * 10^(2-1) = 2130次，剩下的数字是21301到21354，它们的十位数字是5 > 1；因此它会包含10个1；故总数为2130 + 10 = 2140次；

公式：（213 + 1）* 10^(2-1) = 2140次；

百位：从1到21000中包含了21个1000，因此1出现了21 * 10^(3-1) = 2100次，剩下的数字是21001到21354，它们的百位数字是3 > 1；因此它会包含100个1；故总数为2100 + 100 = 2200次；

公式：（21 + 1）* 10^(3-1) = 2200次；

千位：从1到20000中包含了2个10000，因此1出现了2 * 10^(4-1) = 2000次，剩下的数字是20001到21354，它们的千位数字是1 = 1；情况稍微复杂些，354 + 1 = 355；故1的总数为2000 + 355 = 2355次；

公式：2 * 10^(4-1) + 354 + 1 = 2355次；

万位：万位是2 > 1，没有更高位；因此1出现的次数是1 * 10^(5-1) = 10000次；

公式：（0 + 1）*10^(5-1) = 10000次；

故总共为：2136+2140+2200+2355+10000=18831次；

故总结：

1、取第 i 位左边的数字（高位），乘以 10 ^(i−1) ，得到基础值 a 。
2、取第 i 位数字，计算修正值： 
1、如果大于 X，则结果为 a+ 10 ^(i−1) 。
2、如果小于 X，则结果为 a 。
3、如果等 X，则取第 i 位右边（低位）数字，设为 b ，最后结果为 a+b+1 。
 
```

[实践例子](/algorithms-java-example/src/main/java/space.mamba/coding/interviews/No32_CountNumber.java)



