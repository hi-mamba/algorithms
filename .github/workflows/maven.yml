name: Java CI     #Actions名称

on:
  push:
    branches:
      - master # 只在master上push触发
  pull_request:
    branches:
      - master

jobs:
  test:
    name: Unit Testing # java test
    runs-on: ubuntu-18.04
    steps:
      - name: Set up JDK 13
        uses: actions/setup-java@v1  #使用官方脚本创建java环境
        with:
          java-version: 13
        id: java
      - name: Debug only
          shell: bash
          run: |
            pwd && ls -lhaR
      - name: Cache Maven packages
        uses: actions/cache@v2
        with:
          path: ~/.m2
          key: ${{ runner.os }}-m2-${{ hashFiles('**/pom.xml') }}
          restore-keys: ${{ runner.os }}-m2
      - name: Build with Maven
      - run: |
          mvn clean install
          mvn test

